# Class Assigment 2 - Part 1

## Introduction

- This tutorial serves as a guide for practicing using Gradle with a simple example application.
- Adding basic Gradle tasks such as executing servers, writing unit tests, creating backups, and making archives.
- After the addition of any task update the Gradle script to enable its execution.

## Table of Contents
- [Step 1: Downloading and Committing the example application](#step-1-downloading-and-committing-the-example-application-gradle_basic_demo)
- [Step 2: Add new task to execute the server](#step-2-add-new-task-to-execute-the-server)
- [Step 3: Simple Unit Testing](#step-3-simple-unit-test)
- [Step 4: Add new task of type copy](#step-4-add-a-new-task-of-type-copy)
- [Step 5: Add new task of type zip](#step-5-add-a-new-task-of-type-zip)
- [Final Steps](#final-steps)

### Step 1: Downloading and Committing the example application [gradle_basic_demo](https://bitbucket.org/pssmatos/gradle_basic_demo/)

    % git clone https://bitbucket.org/pssmatos/gradle_basic_demo.git

#### Using the ReadMe of the Basic Gradle Demo to test the application
    % cd ca2/part1/gradle_basic_demo
Review the `readme.md` file provided with the example application to understand its structure and functionality.

Build

    % ./gradlew build 

Run the server

    % java -cp build/libs/basic_demo-0.1.0.jar basic_demo.ChatServerApp 59001

Run two clients to test the server is working

    % ./gradlew runClient
---

### Step 2: Add new task to execute the server
- Change Gradle distribution to version 8.5
- Update gradle-wrapper.properties

``` properties
distributionUrl=https\://services.gradle.org/distributions/gradle-8.5-bin.zip
```
---


#### Created task to automate the running of the server
- This task should facilitate running the server component of the example application.
```groovy
task runServer(type: JavaExec, dependsOn: classes) {
    group = "DevOps"
    
    description = "Launches the chat server"

    classpath = sourceSets.main.runtimeClasspath

    mainClass = 'basic_demo.ChatServerApp'

    args '59001' // Specify the desired server port here
}
```

### Step 3: Simple unit test
- Implement a simple unit test for the application to App.java
```java
/*
 * This Java source file was generated by the Gradle 'init' task.
 */

package basic_demo;

import org.junit.Test;

import static org.junit.Assert.*;

/**
 * This is a test class for the {@link App} class.
 */
public class AppTest {
    /**
     * Test to verify that the {@link App} class has a greeting.
     */
    @Test
    public void testAppHasAGreeting() {
        App classUnderTest = new App();

        String greeting = classUnderTest.getGreeting();

        assertNotNull("App should have a greeting", greeting);
    }
}
```
- Ensure that the required dependency, junit 4.12, is added to Gradle.

    implementation 'junit:junit:4.12'

### Step 4: Add a new task of type Copy
- Add a new task of type Copy to create a backup of the application's source files.
- The task should copy the contents of the src folder to a new backup folder.

```groovy
task backupSources(type: Copy) {
    group = 'Backup'
    description = 'Make a backup of the application sources'

    // Define the source directory
    def sourceDir = file('src')

    // Define the destination directory for the backup
    def backupDir = file("${buildDir}/backup/src")

    // Set the source and destination directories for the copy operation
    from sourceDir
    into backupDir
}
```

### Step 5: Add a new task of type Zip
- Introduce a new task of type Zip to create an archive (i.e., zip file) of the application's source files.
- The task should copy the contents of the src folder to a new zip file.

```groovy
task zipSources(type: Zip) {
    group = 'Archive'
    description = 'Creates a zip archive containing the application sources'

    // Define the source directory
    def sourceDir = file('src')

    // Define the destination zip file
    def zipFile = file("${buildDir}/archives/sources.zip")

    // Set the source directory for the zip operation
    from sourceDir

    // Set the name and destination directory for the created zip archive
    archiveFileName = zipFile.name
    destinationDirectory = zipFile.parentFile
}
```

### Final Steps
At the completion of Part 1 of this assignment, mark your repository with the tag ca2-part1.

    % git tag ca2-part1
    % git push --tags
    

