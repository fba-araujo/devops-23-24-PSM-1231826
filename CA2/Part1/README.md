# Class Assigment 2

## Introduction

In this tutorial, we'll be working with an existing application that implements a basic multithreaded chat room server.
Adding new features to it.

## Table of Contents

- [Part 1](#Part-1)
- [Step 1: Downloading and Committing the example application](#step-1-downloading-and-committing-the-example-application-)
- [Step 2: Add new task to execute the server](#step-2-add-new-task-to-execute-the-server)
- [Step 3: Simple Unit Testing](#step-3-simple-unit-test)
- [Step 4: Add new task of type copy](#step-4-add-a-new-task-of-type-copy)
- [Step 5: Add new task of type zip](#step-5-add-a-new-task-of-type-zip)

## Part 1

The goal is to practice using graddle.

### Step 1: Downloading and Committing the example application

    % git clone https://bitbucket.org/pssmatos/gradle_basic_demo.git

### Step 2: Add new task to execute the server

Changed my Gradle distribution to version 8.5

Updated gradle-wrapper.properties

``` properties
distributionUrl=https\://services.gradle.org/distributions/gradle-8.5-bin.zip
```
---
#### Using the ReadMe of the Basic Graddle Demo

    % cd ca2/part1/gradle_basic_demo
Build

    % ./gradlew build 

Run the server

    % java -cp build/libs/basic_demo-0.1.0.jar basic_demo.ChatServerApp 59001

Run two clients to test

    % ./gradlew runClient
---

#### Created task to automate the running of the server

```groovy
task runServer(type: JavaExec, dependsOn: classes) {
    group = "DevOps"
    
    description = "Launches the chat server"

    classpath = sourceSets.main.runtimeClasspath

    mainClass = 'basic_demo.ChatServerApp'

    args '59001' // Specify the desired server port here
}
```

### Step 3: Simple unit test

Added the following test to App.java

```java
/*
 * This Java source file was generated by the Gradle 'init' task.
 */

package basic_demo;

import org.junit.Test;

import static org.junit.Assert.*;

/**
 * This is a test class for the {@link App} class.
 */
public class AppTest {
    /**
     * Test to verify that the {@link App} class has a greeting.
     */
    @Test
    public void testAppHasAGreeting() {
        App classUnderTest = new App();

        String greeting = classUnderTest.getGreeting();

        assertNotNull("App should have a greeting", greeting);
    }
}
```

And added the following dependency to gradle script

    implementation 'junit:junit:4.12'

### Step 4: Add a new task of type Copy

```groovy
task backupSources(type: Copy) {
    group = 'Backup'
    description = 'Make a backup of the application sources'

    // Define the source directory
    def sourceDir = file('src')

    // Define the destination directory for the backup
    def backupDir = file("${buildDir}/backup/src")

    // Set the source and destination directories for the copy operation
    from sourceDir
    into backupDir
}
```

### Step 5: Add a new task of type Zip

```groovy
task zipSources(type: Zip) {
    group = 'Archive'
    description = 'Creates a zip archive containing the application sources'

    // Define the source directory
    def sourceDir = file('src')

    // Define the destination zip file
    def zipFile = file("${buildDir}/archives/sources.zip")

    // Set the source directory for the zip operation
    from sourceDir

    // Set the name and destination directory for the created zip archive
    archiveFileName = zipFile.name
    destinationDirectory = zipFile.parentFile
}
```

